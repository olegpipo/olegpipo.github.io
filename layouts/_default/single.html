{{ define "main" }}
<!-- Breadcrumb JSON-LD -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ .Site.BaseURL }}"
    }{{ if .CurrentSection }}{{ if ne .CurrentSection.RelPermalink "/" }},
    {
      "@type": "ListItem",
      "position": 2,
      "name": "{{ .CurrentSection.Title }}",
      "item": "{{ .CurrentSection.Permalink }}"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "{{ .Title }}"
    }{{ end }}{{ end }}
  ]
}
</script>

<!-- Article JSON-LD -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "{{ .Title }}",
  "description": "{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}",
  "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
  "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",
  "url": "{{ .Permalink }}",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink }}"
  },
  "author": {
    "@type": "Organization",
    "name": "PanicVault",
    "url": "{{ .Site.BaseURL }}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "PanicVault",
    "url": "{{ .Site.BaseURL }}",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ .Site.BaseURL }}img/panicvault.png"
    }
  }
}
</script>

<article class="pv-article">
  <!-- Breadcrumb Navigation -->
  <nav class="pv-breadcrumb" aria-label="Breadcrumb">
    <div class="pv-breadcrumb-inner">
      <ol class="pv-breadcrumb-list">
        <li><a href="/">Home</a></li>
        {{ if .CurrentSection }}{{ if ne .CurrentSection.RelPermalink "/" }}
        <li><a href="{{ .CurrentSection.RelPermalink }}">{{ .CurrentSection.Title }}</a></li>
        {{ end }}{{ end }}
        <li aria-current="page">{{ .Title }}</li>
      </ol>
    </div>
  </nav>

  <!-- Article Header -->
  <header class="pv-article-header">
    <div class="pv-article-header-inner">
      {{ with .Params.silo }}<div class="pv-section-label">{{ . }}</div>{{ end }}
      <h1>{{ .Title }}</h1>
      <div class="pv-article-meta">
        <span class="pv-article-reading-time">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
          {{ .ReadingTime }} min read
        </span>
        {{ with .Lastmod }}
        <span class="pv-article-date">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
          Updated {{ .Format "Jan 2, 2006" }}
        </span>
        {{ end }}
      </div>
      {{ with .Description }}<p class="pv-article-subtitle">{{ . }}</p>{{ end }}
    </div>
  </header>

  <!-- Article Body -->
  <div class="pv-article-body">
    <div class="pv-article-body-inner">

      <!-- Table of Contents -->
      {{ if .TableOfContents }}
      {{ $toc := .TableOfContents }}
      {{ if gt (len $toc) 100 }}
      <details class="pv-toc" open>
        <summary class="pv-toc-title">Table of Contents</summary>
        <div class="pv-toc-content">
          {{ $toc }}
        </div>
      </details>
      {{ end }}
      {{ end }}

      <!-- Main Content -->
      <div class="pv-article-content">
        {{ .Content }}
      </div>

    </div>
  </div>

  <!-- Related Articles -->
  {{ $related := where .CurrentSection.Pages "RelPermalink" "ne" .RelPermalink }}
  {{ if $related }}
  <section class="pv-section pv-related-section">
    <div class="pv-section-inner">
      <div class="pv-section-label">Related Articles</div>
      <h2>More on {{ .CurrentSection.Title }}</h2>
      <p class="pv-section-subtitle">Continue exploring this topic with these related guides.</p>
      <div class="pv-related-grid">
        {{ range first 6 $related }}
        <a href="{{ .RelPermalink }}" class="pv-related-card pv-reveal">
          <h3>{{ .Title }}</h3>
          {{ with .Description }}<p>{{ . }}</p>{{ end }}
          <span class="pv-related-card-meta">{{ .ReadingTime }} min read</span>
        </a>
        {{ end }}
      </div>
    </div>
  </section>
  {{ end }}

  <!-- CTA Section -->
  <section class="pv-section pv-article-cta">
    <div class="pv-section-inner">
      <div class="pv-article-cta-box">
        <img class="pv-article-cta-logo" src="/img/panicvault.png" alt="PanicVault" width="64" height="64">
        <h2>Protect Your Passwords with PanicVault</h2>
        <p>A secure, offline-first password manager using the open KeePass format. Your passwords, your file, your control.</p>
        <a class="pv-cta-button" href="#">
          <svg viewBox="0 0 24 24"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.8-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>
          Download on the App Store
        </a>
      </div>
    </div>
  </section>
</article>
{{ end }}

{{ define "scripts" }}
{{ partial "reveal-script.html" . }}
{{ end }}
