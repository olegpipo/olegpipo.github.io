{{ printf "<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?>" | safeHTML }}
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
  xmlns:xhtml="http://www.w3.org/1999/xhtml">
  {{- range .Data.Pages }}
  {{- if not .Draft }}
  <url>
    <loc>{{ .Permalink }}</loc>
    {{- if not .Lastmod.IsZero }}
    <lastmod>{{ .Lastmod.Format "2006-01-02" }}</lastmod>
    {{- else if not .Date.IsZero }}
    <lastmod>{{ .Date.Format "2006-01-02" }}</lastmod>
    {{- end }}
    {{- /* Determine changefreq based on page type */ -}}
    {{- if .IsHome }}
    <changefreq>weekly</changefreq>
    {{- else if or (eq .Section "privacy") (eq .Section "terms") }}
    <changefreq>yearly</changefreq>
    {{- else if .Params.sitemap_changefreq }}
    <changefreq>{{ .Params.sitemap_changefreq }}</changefreq>
    {{- else }}
    <changefreq>monthly</changefreq>
    {{- end }}
    {{- /* Determine priority based on page type */ -}}
    {{- if .IsHome }}
    <priority>1.0</priority>
    {{- else if or (eq .Section "privacy") (eq .Section "terms") }}
    <priority>0.3</priority>
    {{- else if eq .Kind "section" }}
    <priority>0.8</priority>
    {{- else if .Params.sitemap_priority }}
    <priority>{{ .Params.sitemap_priority }}</priority>
    {{- else }}
    <priority>0.6</priority>
    {{- end }}
  </url>
  {{- end }}
  {{- end }}
</urlset>
